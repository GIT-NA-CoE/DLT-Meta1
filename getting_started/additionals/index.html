<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.87.0">
<meta name=description content="DLT-META Documentation">
<meta name=author content="Ravi Gawai (Databricks)">
<link rel=icon href=https://databrickslabs.github.io/dlt-meta/images/favicon.png type=image/png>
<title>Additionals :: DLT-META</title>
<link href=https://databrickslabs.github.io/dlt-meta/css/nucleus.css?1679444064 rel=stylesheet>
<link href=https://databrickslabs.github.io/dlt-meta/css/fontawesome-all.min.css?1679444064 rel=stylesheet>
<link href=https://databrickslabs.github.io/dlt-meta/css/hybrid.css?1679444064 rel=stylesheet>
<link href=https://databrickslabs.github.io/dlt-meta/css/featherlight.min.css?1679444064 rel=stylesheet>
<link href=https://databrickslabs.github.io/dlt-meta/css/perfect-scrollbar.min.css?1679444064 rel=stylesheet>
<link href=https://databrickslabs.github.io/dlt-meta/css/auto-complete.css?1679444064 rel=stylesheet>
<link href=https://databrickslabs.github.io/dlt-meta/css/atom-one-dark-reasonable.css?1679444064 rel=stylesheet>
<link href=https://databrickslabs.github.io/dlt-meta/css/theme.css?1679444064 rel=stylesheet>
<link href=https://databrickslabs.github.io/dlt-meta/css/tabs.css?1679444064 rel=stylesheet>
<link href=https://databrickslabs.github.io/dlt-meta/css/hugo-theme.css?1679444064 rel=stylesheet>
<script src=https://databrickslabs.github.io/dlt-meta/js/jquery-3.3.1.min.js?1679444064></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}</style>
<script async defer src=https://buttons.github.io/buttons.js></script>
</head>
<body data-url=https://databrickslabs.github.io/dlt-meta/getting_started/additionals/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a id=logo href=https://databrickslabs.github.io/dlt-meta/>
</a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=https://databrickslabs.github.io/dlt-meta/js/lunr.min.js?1679444064></script>
<script type=text/javascript src=https://databrickslabs.github.io/dlt-meta/js/auto-complete.js?1679444064></script>
<script type=text/javascript>var baseurl="https://databrickslabs.github.io/dlt-meta/"</script>
<script type=text/javascript src=https://databrickslabs.github.io/dlt-meta/js/search.js?1679444064></script>
</div>
<section id=homelinks>
<ul>
<li>
<a class=padding href=https://databrickslabs.github.io/dlt-meta/><i class="fas fa-home"></i> Home</a>
</li>
</ul>
</section>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/getting_started/ title="Getting Started" class="dd-item
parent">
<a href=https://databrickslabs.github.io/dlt-meta/getting_started/>
Getting Started
</a>
<ul>
<li data-nav-id=/getting_started/metadatapreperation/ title="Metadata Preparation" class=dd-item>
<a href=https://databrickslabs.github.io/dlt-meta/getting_started/metadatapreperation/>
Metadata Preparation
</a>
</li>
<li data-nav-id=/getting_started/buildwhl/ title="Build Python Wheel" class=dd-item>
<a href=https://databrickslabs.github.io/dlt-meta/getting_started/buildwhl/>
Build Python Wheel
</a>
</li>
<li data-nav-id=/getting_started/launchonboardingjob/ title="Launch Onboarding job" class=dd-item>
<a href=https://databrickslabs.github.io/dlt-meta/getting_started/launchonboardingjob/>
Launch Onboarding job
</a>
</li>
<li data-nav-id=/getting_started/dltpipeline/ title="Launch Generic DLT pipeline" class=dd-item>
<a href=https://databrickslabs.github.io/dlt-meta/getting_started/dltpipeline/>
Launch Generic DLT pipeline
</a>
</li>
<li data-nav-id=/getting_started/additionals/ title=Additionals class="dd-item active">
<a href=https://databrickslabs.github.io/dlt-meta/getting_started/additionals/>
Additionals
</a>
</li>
</ul>
</li>
<li data-nav-id=/faq/ title="Frequently Asked Questions (FAQs)" class=dd-item>
<a href=https://databrickslabs.github.io/dlt-meta/faq/>
Frequently Asked Questions (FAQs)
</a>
<ul>
<li data-nav-id=/faq/general/ title=General class=dd-item>
<a href=https://databrickslabs.github.io/dlt-meta/faq/general/>
General
</a>
</li>
<li data-nav-id=/faq/execution/ title=Execution class=dd-item>
<a href=https://databrickslabs.github.io/dlt-meta/faq/execution/>
Execution
</a>
</li>
</ul>
</li>
<li data-nav-id=/contributing/ title=Contributing class=dd-item>
<a href=https://databrickslabs.github.io/dlt-meta/contributing/>
Contributing
</a>
</li>
</ul>
<section id=footer>
<center>
<a class=github-button href=https://github.com/databrickslabs/dlt-meta/subscription data-icon=octicon-eye data-show-count=true aria-label="DLT-META on GitHub">Watch</a>
<a class=github-button href=https://github.com/databrickslabs/dlt-meta data-icon=octicon-star data-show-count=true aria-label="Star databricks/dlt-meta on GitHub">Star</a>
<a class=github-button href=https://github.com/databrickslabs/dlt-meta/fork data-icon=octicon-repo-forked data-show-count=true aria-label="Fork DLT-META on GitHub">Fork</a>
<p>A <a href=https://github.com/databrickslabs>Databricks Labs</a> project.</p>
</center>
<script async defer src=https://buttons.github.io/buttons.js></script>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<a href=https://databrickslabs.github.io/dlt-meta/>DLT-META</a> > <a href=https://databrickslabs.github.io/dlt-meta/getting_started/>Getting Started</a> > Additionals
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#run-integration-tests>Run Integration Tests</a></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
</div>
<div id=body-inner>
<h1>
Additionals
</h1>
<h2 id=run-integration-tests>Run Integration Tests</h2>
<ol>
<li>
<p>Launch Terminal/Command promt</p>
</li>
<li>
<p>Goto to DLT-META directory</p>
</li>
<li>
<p>Create environment variables.</p>
</li>
</ol>
<pre><code>export DATABRICKS_HOST=&lt;DATABRICKS HOST&gt;
export DATABRICKS_TOKEN=&lt;DATABRICKS TOKEN&gt; # Account needs permission to create clusters/dlt pipelines.
</code></pre><ol start=4>
<li>
<p>Commit your local changes to your remote branch used above</p>
</li>
<li>
<p>Run integration test against cloudfile or eventhub or kafka using below options:
5a. Run the command for cloudfiles <code>python integration-tests/run-integration-test.py --cloud_provider_name=aws --dbr_version=11.3.x-scala2.12 --source=cloudfiles --dbfs_path=dbfs:/tmp/DLT-META/</code></p>
<p>5b. Run the command for eventhub <code>python integration-tests/run-integration-test.py --cloud_provider_name=azure --dbr_version=11.3.x-scala2.12 --source=eventhub --dbfs_path=dbfs:/tmp/DLT-META/ --eventhub_name=iot --eventhub_secrets_scope_name=eventhubs_creds --eventhub_namespace=int_test-standard --eventhub_port=9093 --eventhub_producer_accesskey_name=producer ----eventhub_consumer_accesskey_name=consumer</code></p>
<pre><code> For eventhub integration tests, the following are the prerequisites:
 1. Needs eventhub instance running
 2. Using Databricks CLI, Create databricks secrets scope for eventhub keys
 3. Using Databricks CLI, Create databricks secrets to store producer and consumer keys using the scope created in step 2 

 Following are the mandatory arguments for running EventHubs integration test
 1. Provide your eventhub topic name : ```--eventhub_name```
 2. Provide eventhub namespace using ```--eventhub_namespace```
 3. Provide eventhub port using ```--eventhub_port```
 4. Provide databricks secret scope name using ```----eventhub_secrets_scope_name```
 5. Provide eventhub producer access key name using ```--eventhub_producer_accesskey_name```
 6. Provide eventhub access key name using ```--eventhub_consumer_accesskey_name```
</code></pre>
<p>5c. Run the command for kafka <code>python3 integration-tests/run-integration-test.py --cloud_provider_name=aws --dbr_version=11.3.x-scala2.12 --source=kafka --dbfs_path=dbfs:/tmp/DLT-META/ --kafka_topic_name=dlt-meta-integration-test --kafka_broker=host:9092</code></p>
<pre><code> For kafka integration tests, the following are the prerequisites:
 1. Needs kafka instance running

 Following are the mandatory arguments for running EventHubs integration test
 1. Provide your kafka topic name : ```--kafka_topic_name```
 2. Provide kafka_broker  ```--kafka_broker```
</code></pre>
</li>
<li>
<p>Once finished integration output file will be copied locally to
<code>integration-test-output_&lt;run_id>.txt</code></p>
</li>
<li>
<p>Output of a successful run should have the following in the file</p>
</li>
</ol>
<pre><code>Generating Onboarding Json file for Integration Test.
Successfully Generated Onboarding Json file for Integration Test.
Setting up dlt-meta metadata tables.
Successfully setup dlt-meta metadata tables.
Completed Bronze DLT Pipeline.
Completed Silver DLT Pipeline.
Validating DLT Bronze and Silver Table Counts...
Validating Counts for Table bronze_f7d4934efe494de987f364e8d93acaba.transactions_cdc.
Expected: 10002 Actual: 10002. Passed!
Validating Counts for Table bronze_f7d4934efe494de987f364e8d93acaba.transactions_cdc_quarantine.
Expected: 9842 Actual: 9842. Passed!
Validating Counts for Table bronze_f7d4934efe494de987f364e8d93acaba.customers_cdc.
Expected: 98928 Actual: 98928. Passed!
Validating Counts for Table silver_f7d4934efe494de987f364e8d93acaba.transactions.
Expected: 8759 Actual: 8759. Passed!
Validating Counts for Table silver_f7d4934efe494de987f364e8d93acaba.customers.
Expected: 87256 Actual: 87256. Passed!
DROPPING DB bronze_f7d4934efe494de987f364e8d93acaba
DROPPING DB silver_f7d4934efe494de987f364e8d93acaba
DROPPING DB dlt_meta_framework_it_f7d4934efe494de987f364e8d93acaba_f7d4934efe494de987f364e8d93acaba
Removed Integration test databases
</code></pre>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation>
<a class="nav nav-prev" href=https://databrickslabs.github.io/dlt-meta/getting_started/dltpipeline/ title="Launch Generic DLT pipeline"> <i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=https://databrickslabs.github.io/dlt-meta/faq/ title="Frequently Asked Questions (FAQs)" style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=https://databrickslabs.github.io/dlt-meta/js/clipboard.min.js?1679444064></script>
<script src=https://databrickslabs.github.io/dlt-meta/js/perfect-scrollbar.min.js?1679444064></script>
<script src=https://databrickslabs.github.io/dlt-meta/js/perfect-scrollbar.jquery.min.js?1679444064></script>
<script src=https://databrickslabs.github.io/dlt-meta/js/jquery.sticky.js?1679444064></script>
<script src=https://databrickslabs.github.io/dlt-meta/js/featherlight.min.js?1679444064></script>
<script src=https://databrickslabs.github.io/dlt-meta/js/highlight.pack.js?1679444064></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=https://databrickslabs.github.io/dlt-meta/js/modernizr.custom-3.6.0.js?1679444064></script>
<script src=https://databrickslabs.github.io/dlt-meta/js/learn.js?1679444064></script>
<script src=https://databrickslabs.github.io/dlt-meta/js/hugo-learn.js?1679444064></script>
<script src=https://databrickslabs.github.io/dlt-meta/mermaid/mermaid.js?1679444064></script>
<script>mermaid.initialize({startOnLoad:!0})</script>
</body>
</html>